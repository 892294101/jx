{"ast":null,"code":"/**\r\n * 路由的封装\r\n *\r\n * @author xiaoRui\r\n */\n\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport Login from '@/views/Login';\nimport Home from '@/views/Home';\nimport Index from '@/views/Index';\nimport storage from '@/utils/storage';\nimport Personal from '@/views/Personal';\nimport Users from '@/views/base/User';\nimport Role from '@/views/base/Role';\nimport Menu from '@/views/base/Menu';\nimport Dept from '@/views/base/Dept';\nimport Post from '@/views/base/Post';\nimport LoginLog from '@/views/monitor/LoginLog';\nimport Operator from '@/views/monitor/OperatorLog';\nimport ReportCurrent from \"@/views/report/ReportCurrent\";\nimport NodFound from \"@/views/error/404\";\nVue.use(Router);\n\n// 路由集合\nconst router = new Router({\n  mode: 'history',\n  // 去掉url中的#\n  routes: [{\n    path: '/',\n    redirect: '/login'\n  }, {\n    path: '/login',\n    component: Login\n  }, {\n    path: '/home',\n    component: Home,\n    redirect: '/index',\n    children: [{\n      path: '/index',\n      component: Index,\n      meta: {\n        tTitle: '首页'\n      }\n    }, {\n      path: '/personal',\n      component: Personal,\n      meta: {\n        sTitle: '个人中心',\n        tTitle: '个人信息'\n      }\n    }, {\n      path: '/base/users',\n      component: Users,\n      meta: {\n        sTitle: '基础管理',\n        tTitle: '用户信息'\n      }\n    }, {\n      path: '/base/Role',\n      component: Role,\n      meta: {\n        sTitle: '基础管理',\n        tTitle: '角色信息'\n      }\n    }, {\n      path: '/base/Menu',\n      component: Menu,\n      meta: {\n        sTitle: '基础管理',\n        tTitle: '菜单信息'\n      }\n    }, {\n      path: '/base/Dept',\n      component: Dept,\n      meta: {\n        sTitle: '基础管理',\n        tTitle: '部门信息'\n      }\n    }, {\n      path: '/base/Post',\n      component: Post,\n      meta: {\n        sTitle: '基础管理',\n        tTitle: '岗位信息'\n      }\n    }, {\n      path: '/monitor/Operator',\n      component: Operator,\n      meta: {\n        sTitle: '日志管理',\n        tTitle: '操作日志'\n      }\n    }, {\n      path: '/monitor/LoginLog',\n      component: LoginLog,\n      meta: {\n        sTitle: '日志管理',\n        tTitle: '登录日志'\n      }\n    }, {\n      path: '/report/current',\n      component: ReportCurrent,\n      meta: {\n        sTitle: '报表系统',\n        tTitle: '当前报表'\n      }\n    }]\n  }, {\n    path: \"/:catchAll(.*)\",\n    component: NodFound,\n    name: 'Not Found 404'\n  }]\n});\n\n// 挂载路由导航\nrouter.beforeEach((to, from, next) => {\n  console.log(to.path);\n  console.log(from.path);\n\n  // 如果访问/login页面，直接调用next\n  if (to.path === '/login') {\n    return next();\n  }\n\n  // 如果不是访问的/login页面，先检查本地存储是否有token，如果没有，跳转到/login让用户登陆\n  const tokenStr = storage.getItem(\"token\");\n  if (!tokenStr) {\n    return next('/login');\n  }\n  if (tokenStr && from.path === '/') {\n    console.log(\"go /index\");\n    return next('/index');\n  }\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","Router","Login","Home","Index","storage","Personal","Users","Role","Menu","Dept","Post","LoginLog","Operator","ReportCurrent","NodFound","use","router","mode","routes","path","redirect","component","children","meta","tTitle","sTitle","name","beforeEach","to","from","next","console","log","tokenStr","getItem"],"sources":["/Users/kqwang/development/gowork/src/github.com/892294101/jx/jxweb/src/router/router.js"],"sourcesContent":["/**\r\n * 路由的封装\r\n *\r\n * @author xiaoRui\r\n */\r\n\r\nimport Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Login from '@/views/Login'\r\nimport Home from '@/views/Home'\r\nimport Index from '@/views/Index'\r\nimport storage from '@/utils/storage'\r\nimport Personal from '@/views/Personal'\r\nimport Users from '@/views/base/User'\r\nimport Role from '@/views/base/Role'\r\nimport Menu from '@/views/base/Menu'\r\nimport Dept from '@/views/base/Dept'\r\nimport Post from '@/views/base/Post'\r\nimport LoginLog from '@/views/monitor/LoginLog'\r\nimport Operator from '@/views/monitor/OperatorLog'\r\nimport ReportCurrent from \"@/views/report/ReportCurrent\";\r\nimport NodFound from \"@/views/error/404\"\r\n\r\nVue.use(Router)\r\n\r\n// 路由集合\r\nconst router = new Router({\r\n    mode: 'history', // 去掉url中的#\r\n    routes: [\r\n        {path: '/', redirect: '/login'},\r\n        {path: '/login', component: Login},\r\n        {\r\n            path: '/home',\r\n            component: Home,\r\n            redirect: '/index',\r\n            children: [\r\n                {\r\n                    path: '/index',\r\n                    component: Index,\r\n                    meta: {tTitle: '首页'}\r\n                },\r\n                {\r\n                    path: '/personal',\r\n                    component: Personal,\r\n                    meta: {sTitle: '个人中心', tTitle: '个人信息'}\r\n                },\r\n                {\r\n                    path: '/base/users',\r\n                    component: Users,\r\n                    meta: {sTitle: '基础管理', tTitle: '用户信息'}\r\n                },\r\n                {\r\n                    path: '/base/Role',\r\n                    component: Role,\r\n                    meta: {sTitle: '基础管理', tTitle: '角色信息'}\r\n                },\r\n                {\r\n                    path: '/base/Menu',\r\n                    component: Menu,\r\n                    meta: {sTitle: '基础管理', tTitle: '菜单信息'}\r\n                },\r\n                {\r\n                    path: '/base/Dept',\r\n                    component: Dept,\r\n                    meta: {sTitle: '基础管理', tTitle: '部门信息'}\r\n                },\r\n                {\r\n                    path: '/base/Post',\r\n                    component: Post,\r\n                    meta: {sTitle: '基础管理', tTitle: '岗位信息'}\r\n                },\r\n                {\r\n                    path: '/monitor/Operator',\r\n                    component: Operator,\r\n                    meta: {sTitle: '日志管理', tTitle: '操作日志'}\r\n                },\r\n                {\r\n                    path: '/monitor/LoginLog',\r\n                    component: LoginLog,\r\n                    meta: {sTitle: '日志管理', tTitle: '登录日志'}\r\n                },\r\n                {\r\n                    path: '/report/current',\r\n                    component: ReportCurrent,\r\n                    meta: {sTitle: '报表系统', tTitle: '当前报表'}\r\n                },\r\n            ]\r\n        },\r\n        {path: \"/:catchAll(.*)\", component: NodFound, name: 'Not Found 404'},\r\n    ]\r\n})\r\n\r\n// 挂载路由导航\r\nrouter.beforeEach((to, from, next) => {\r\n\r\n    console.log(to.path)\r\n    console.log(from.path)\r\n\r\n    // 如果访问/login页面，直接调用next\r\n    if (to.path === '/login') {\r\n        return next()\r\n    }\r\n\r\n    // 如果不是访问的/login页面，先检查本地存储是否有token，如果没有，跳转到/login让用户登陆\r\n    const tokenStr = storage.getItem(\"token\")\r\n    if (!tokenStr) {\r\n        return next('/login')\r\n    }\r\n\r\n    if (tokenStr && from.path === '/') {\r\n        console.log(\"go /index\")\r\n        return next('/index')\r\n    }\r\n\r\n\r\n    next()\r\n})\r\nexport default router"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}