{"ast":null,"code":"import Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\nexport default {\n  components: {\n    Treeselect\n  },\n  data() {\n    return {\n      queryParams: {},\n      menuStatusList: [{\n        value: '2',\n        label: '启用'\n      }, {\n        value: '1',\n        label: '停用'\n      }],\n      loading: true,\n      menuList: [],\n      isExpandAll: false,\n      refreshTable: true,\n      iconList: [{\n        value: 'el-icon-platform-eleme',\n        label: 'el-icon-platform-eleme'\n      }, {\n        value: 'el-icon-eleme',\n        label: 'el-icon-eleme'\n      }, {\n        value: 'el-icon-delete-solid',\n        label: 'el-icon-delete-solid'\n      }, {\n        value: 'el-icon-delete',\n        label: 'el-icon-delete'\n      }, {\n        value: 'el-icon-s-tools',\n        label: 'el-icon-s-tools'\n      }, {\n        value: 'el-icon-setting',\n        label: 'el-icon-setting'\n      }, {\n        value: 'el-icon-user-solid',\n        label: 'el-icon-user-solid'\n      }, {\n        value: 'el-icon-user',\n        label: 'el-icon-user'\n      }, {\n        value: 'el-icon-phone',\n        label: 'el-icon-phone'\n      }, {\n        value: 'el-icon-phone-outline',\n        label: 'el-icon-phone-outline'\n      }, {\n        value: 'el-icon-star-on',\n        label: 'el-icon-star-on'\n      }, {\n        value: 'el-icon-star-off',\n        label: 'el-icon-star-off'\n      }, {\n        value: 'el-icon-s-goods',\n        label: 'el-icon-s-goods'\n      }, {\n        value: 'el-icon-goods',\n        label: 'el-icon-goods'\n      }, {\n        value: 'el-icon-s-help',\n        label: 'el-icon-s-help'\n      }, {\n        value: 'el-icon-picture',\n        label: 'el-icon-picture'\n      }, {\n        value: 'el-icon-picture-outline',\n        label: 'el-icon-picture-outline'\n      }, {\n        value: 'el-icon-picture-outline-round',\n        label: 'el-icon-picture-outline-round'\n      }, {\n        value: 'el-icon-upload',\n        label: 'el-icon-upload'\n      }, {\n        value: 'el-icon-upload2',\n        label: 'el-icon-upload2'\n      }, {\n        value: 'el-icon-download',\n        label: 'el-icon-download'\n      }, {\n        value: 'el-icon-s-cooperation',\n        label: 'el-icon-s-cooperation'\n      }, {\n        value: 'el-icon-s-order',\n        label: 'el-icon-s-order'\n      }, {\n        value: 'el-icon-s-promotion',\n        label: 'el-icon-s-promotion'\n      }, {\n        value: 'el-icon-s-home',\n        label: 'el-icon-s-home'\n      }, {\n        value: 'el-icon-s-shop',\n        label: 'el-icon-s-shop'\n      }, {\n        value: 'el-icon-s-marketing',\n        label: 'el-icon-s-marketing'\n      }, {\n        value: 'el-icon-s-flag',\n        label: 'el-icon-s-flag'\n      }, {\n        value: 'el-icon-s-comment',\n        label: 'el-icon-s-comment'\n      }, {\n        value: 'el-icon-s-finance',\n        label: 'el-icon-s-finance'\n      }, {\n        value: 'el-icon-s-claim',\n        label: 'el-icon-s-claim'\n      }, {\n        value: 'el-icon-s-custom',\n        label: 'el-icon-s-custom'\n      }, {\n        value: 'el-icon-s-opportunity',\n        label: 'el-icon-s-opportunity'\n      }, {\n        value: 'el-icon-s-data',\n        label: 'el-icon-s-data'\n      }, {\n        value: 'el-icon-s-check',\n        label: 'el-icon-s-check'\n      }, {\n        value: 'el-icon-s-grid',\n        label: 'el-icon-s-grid'\n      }, {\n        value: 'el-icon-menu',\n        label: 'el-icon-menu'\n      }, {\n        value: 'el-icon-share',\n        label: 'el-icon-share'\n      }, {\n        value: 'el-icon-bottom',\n        label: 'el-icon-bottom'\n      }, {\n        value: 'el-icon-top',\n        label: 'el-icon-top'\n      }, {\n        value: 'el-icon-key',\n        label: 'el-icon-key'\n      }, {\n        value: 'el-icon-unlock',\n        label: 'el-icon-unlock'\n      }, {\n        value: 'el-icon-potato-strips',\n        label: 'el-icon-potato-strips'\n      }, {\n        value: 'el-icon-shopping-cart-full',\n        label: 'el-icon-shopping-cart-full'\n      }, {\n        value: 'el-icon-shopping-cart-1',\n        label: 'el-icon-shopping-cart-1'\n      }, {\n        value: 'el-icon-shopping-cart-2',\n        label: 'el-icon-shopping-cart-2'\n      }, {\n        value: 'el-icon-shopping-bag-1',\n        label: 'el-icon-shopping-bag-1'\n      }, {\n        value: 'el-icon-sell',\n        label: 'el-icon-sell'\n      }, {\n        value: 'el-icon-present',\n        label: 'el-icon-present'\n      }, {\n        value: 'el-icon-box',\n        label: 'el-icon-box'\n      }, {\n        value: 'el-icon-bank-card',\n        label: 'el-icon-bank-card'\n      }, {\n        value: 'el-icon-wallet',\n        label: 'el-icon-wallet'\n      }, {\n        value: 'el-icon-discount',\n        label: 'el-icon-discount'\n      }, {\n        value: 'el-icon-price-tag',\n        label: 'el-icon-price-tag'\n      }, {\n        value: 'el-icon-news',\n        label: 'el-icon-news'\n      }, {\n        value: 'el-icon-guide',\n        label: 'el-icon-guide'\n      }, {\n        value: 'el-icon-connection',\n        label: 'el-icon-connection'\n      }, {\n        value: 'el-icon-chat-dot-round',\n        label: 'el-icon-chat-dot-round'\n      }],\n      addMenuDialogVisible: false,\n      menuForm: {\n        menuStatus: 2\n      },\n      addMenuFormRules: {\n        menuType: [{\n          required: true,\n          message: \"菜单类型不能为空\",\n          trigger: \"blur\"\n        }],\n        menuName: [{\n          required: true,\n          message: \"菜单名称不能为空\",\n          trigger: \"blur\"\n        }],\n        sort: [{\n          required: true,\n          message: \"菜单顺序不能为空\",\n          trigger: \"blur\"\n        }],\n        value: [{\n          required: true,\n          message: \"权限标识不能为空\",\n          trigger: \"blur\"\n        }]\n      },\n      treeList: [],\n      editMenuDialogVisible: false,\n      menuInfo: [],\n      editMenuFormRules: {\n        menuType: [{\n          required: true,\n          message: \"菜单类型不能为空\",\n          trigger: \"blur\"\n        }],\n        menuName: [{\n          required: true,\n          message: \"菜单名称不能为空\",\n          trigger: \"blur\"\n        }],\n        sort: [{\n          required: true,\n          message: \"菜单顺序不能为空\",\n          trigger: \"blur\"\n        }],\n        value: [{\n          required: true,\n          message: \"权限标识不能为空\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    // 列表\n    async getMenuList() {\n      this.loading = true;\n      const {\n        data: res\n      } = await this.$api.queryMenuList(this.queryParams);\n      // console.log(res)\n      if (res.code !== 200) {\n        this.$message.error(res.message);\n      } else {\n        this.menuList = this.$handleTree.handleTree(res.data, \"id\");\n        this.loading = false;\n      }\n    },\n    // 搜索\n    handleQuery() {\n      this.getMenuList();\n    },\n    // 重置\n    resetQuery() {\n      this.queryParams = {};\n      this.getMenuList();\n      this.$message.success(\"重置成功\");\n    },\n    // 展开/折叠\n    toggleExpandAll() {\n      this.refreshTable = false;\n      this.isExpandAll = !this.isExpandAll;\n      this.$nextTick(() => {\n        this.refreshTable = true;\n      });\n    },\n    // 新增菜单关闭事件\n    addMenuDialogClosed() {\n      this.$refs.addMenuFormRefForm.resetFields();\n    },\n    // 新增下拉列表\n    async getMenuVoList() {\n      const {\n        data: res\n      } = await this.$api.querySysMenuVoList();\n      if (res.code !== 200) {\n        this.$message.error(res.message);\n      } else {\n        this.treeList = this.$handleTree.handleTree(res.data, \"id\");\n      }\n    },\n    // 新增操作\n    addMenu() {\n      this.$refs.addMenuFormRefForm.validate(async valid => {\n        if (!valid) return;\n        const {\n          data: res\n        } = await this.$api.addMenu(this.menuForm);\n        if (res.code !== 200) {\n          this.$message.error(res.message);\n        } else {\n          this.$message.success(\"新增菜单成功\");\n          this.addMenuDialogVisible = false;\n          await this.getMenuList();\n          await this.getMenuVoList();\n        }\n      });\n    },\n    // 监听修改菜单关闭事件\n    editMenuDialogClosed() {\n      this.$refs.editMenuFormRefForm.resetFields();\n    },\n    // 打开菜单\n    async showEditMenuDialog(id) {\n      const {\n        data: res\n      } = await this.$api.menuInfo(id);\n      if (res.code !== 200) {\n        this.$message.error(res.message);\n      } else {\n        this.menuInfo = res.data;\n        this.editMenuDialogVisible = true;\n      }\n    },\n    // 修改菜单\n    editMenu() {\n      this.$refs.editMenuFormRefForm.validate(async valid => {\n        if (!valid) return;\n        const {\n          data: res\n        } = await this.$api.menuUpdate(this.menuInfo);\n        if (res.code !== 200) {\n          this.$message.error(res.message);\n        } else {\n          this.editMenuDialogVisible = false;\n          await this.getMenuList();\n          this.$message.success(\"修改菜单成功\");\n        }\n      });\n    },\n    // 删除菜单\n    async handleMenuDelete(row) {\n      const confirmResult = await this.$confirm('是否确认删除菜单为\"' + row.menuName + '\"的数据项？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err);\n      if (confirmResult !== 'confirm') {\n        return this.$message.info('已取消删除');\n      }\n      const {\n        data: res\n      } = await this.$api.menuDelete(row.id);\n      if (res.code !== 200) {\n        this.$message.error(res.message);\n      } else {\n        this.$message.success('删除成功');\n        await this.getMenuList();\n      }\n    }\n  },\n  created() {\n    this.getMenuList();\n    this.getMenuVoList();\n  }\n};","map":{"version":3,"names":["Treeselect","components","data","queryParams","menuStatusList","value","label","loading","menuList","isExpandAll","refreshTable","iconList","addMenuDialogVisible","menuForm","menuStatus","addMenuFormRules","menuType","required","message","trigger","menuName","sort","treeList","editMenuDialogVisible","menuInfo","editMenuFormRules","methods","getMenuList","res","$api","queryMenuList","code","$message","error","$handleTree","handleTree","handleQuery","resetQuery","success","toggleExpandAll","$nextTick","addMenuDialogClosed","$refs","addMenuFormRefForm","resetFields","getMenuVoList","querySysMenuVoList","addMenu","validate","valid","editMenuDialogClosed","editMenuFormRefForm","showEditMenuDialog","id","editMenu","menuUpdate","handleMenuDelete","row","confirmResult","$confirm","confirmButtonText","cancelButtonText","type","catch","err","info","menuDelete","created"],"sources":["src/views/base/Menu.vue"],"sourcesContent":["<template>\r\n  <el-card>\r\n    <el-form size=\"mini\" :inline=\"true\" :model=\"queryParams\">\r\n      <el-form-item prop=\"menuName\" label=\"菜单名称\">\r\n        <el-input class=\"searchList\" placeholder=\"请输入菜单名称\" clearable size=\"mini\" @keyup.enter.native=\"handleQuery\"\r\n                  v-model=\"queryParams.menuName\"/>\r\n      </el-form-item>\r\n      <el-form-item prop=\"menuStatus\" label=\"菜单状态\">\r\n        <el-select class=\"searchList\" size=\"mini\" placeholder=\"请选择菜单状态\" v-model=\"queryParams.menuStatus\">\r\n          <el-option v-for=\"item in menuStatusList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button type=\"primary\" icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"addMenuDialogVisible = true\" v-authority=\"['base:menu:add']\">新增\r\n        </el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"info\" plain icon=\"el-icon-sort\" size=\"mini\" @click=\"toggleExpandAll\">展开/折叠\r\n        </el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-table size=\"mini\" border stripe :header-cell-style=\"{ background: '#eef1f6', color: '#606266' }\" v-if=\"refreshTable\"\r\n              v-loading=\"loading\" :data=\"menuList\" row-key=\"id\" :default-expand-all=\"isExpandAll\"\r\n              :tree-props=\"{ children: 'children' }\">\r\n      <el-table-column prop=\"menuName\" label=\"菜单名称\" width=\"auto\" min-width=\"140\"/>\r\n      <el-table-column prop=\"icon\" label=\"图标\" width=\"auto\" min-width=\"35\">\r\n        <template slot-scope=\"scope\">\r\n          <i :class=\"scope.row.icon\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"sort\" label=\"排序\" width=\"auto\" min-width=\"50\"/>\r\n      <el-table-column prop=\"value\" label=\"权限标识\"/>\r\n      <el-table-column prop=\"url\" label=\"组件路径\"/>\r\n      <el-table-column prop=\"menuType\" label=\"菜单类型\" width=\"auto\" min-width=\"60\">\r\n        <!--                <template slot-scope=\"scope\">\r\n                            <div v-if=\"scope.row.menuType === 1\">目录</div>\r\n                            <div v-else-if=\"scope.row.menuType === 2\" type=\"success\">菜单</div>\r\n                            <div v-else-if=\"scope.row.menuType === 3\" type=\"danger\">按钮</div>\r\n                        </template>-->\r\n        <template slot-scope=\"scope\">\r\n          <div v-if=\"scope.row.menuType === 1\">目录</div>\r\n          <div v-else-if=\"scope.row.menuType === 2\">菜单</div>\r\n          <div v-else-if=\"scope.row.menuType === 3\">按钮</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"menuStatus\" label=\"状态\" width=\"auto\" min-width=\"50\">\r\n        <!--                <template slot-scope=\"scope\">\r\n                            <el-tag v-if=\"scope.row.menuStatus === 2\" type=\"success\">启用</el-tag>\r\n                            <el-tag v-else-if=\"scope.row.menuStatus === 1\" type=\"danger\">禁用</el-tag>\r\n                        </template>-->\r\n        <template slot-scope=\"scope\">\r\n          <div v-if=\"scope.row.menuStatus === 2\">启用</div>\r\n          <div v-else-if=\"scope.row.menuStatus === 1\">禁用</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"创建时间\" prop=\"createTime\" width=\"auto\" min-width=\"120\"/>\r\n      <el-table-column label=\"更多操作\" fixed=\"right\" width=\"auto\" min-width=\"90\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"showEditMenuDialog(scope.row.id)\" v-authority=\"['base:menu:edit']\">修改\r\n          </el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleMenuDelete(scope.row)\" v-authority=\"['base:admin:delete']\">删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--新增菜单-->\r\n    <el-dialog title=\"新增菜单\" :visible.sync=\"addMenuDialogVisible\" width=\"30%\" @close=\"addMenuDialogClosed\">\r\n      <el-form :model=\"menuForm\" :rules=\"addMenuFormRules\" ref=\"addMenuFormRefForm\" label-width=\"80px\">\r\n        <el-row>\r\n          <el-col>\r\n            <el-form-item label=\"菜单类型\" prop=\"menuType\">\r\n              <el-radio-group v-model=\"menuForm.menuType\">\r\n                <el-radio :label=\"1\">目录</el-radio>\r\n                <el-radio :label=\"2\">菜单</el-radio>\r\n                <el-radio :label=\"3\">按钮</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item size=\"mini\" label=\"上级菜单\" prop=\"parentId\" v-if=\"menuForm.menuType != 1\">\r\n              <treeselect :options=\"treeList\" placeholder=\"请选择上级菜单\" v-model=\"menuForm.parentId\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item label=\"菜单图标\" prop=\"icon\" v-if=\"menuForm.menuType != 3\">\r\n              <el-select v-model=\"menuForm.icon\">\r\n                <el-option v-for=\"item in iconList\" :key=\"item.value\" :label=\"item.label\"\r\n                           :value=\"item.value\">\r\n                  <i :class=\"item.value\" style=\"font-size: 25px;\"/>\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item label=\"菜单名称\" prop=\"menuName\">\r\n              <el-input v-model=\"menuForm.menuName\" placeholder=\"请输入菜单名称\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item label=\"显示排序\" prop=\"sort\">\r\n              <el-input-number v-model=\"menuForm.sort\" controls-position=\"right\" :min=\"0\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col v-if=\"menuForm.menuType != 3\">\r\n            <el-form-item label=\"菜单url\" prop=\"url\">\r\n              <el-input v-model=\"menuForm.url\" placeholder=\"请输入菜单url\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item v-if=\"menuForm.menuType != 1\" label=\"权限标识\" prop=\"value\">\r\n              <el-input v-model=\"menuForm.value\" placeholder=\"请权限标识\" maxlength=\"50\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item v-if=\"menuForm.menuType != 3\" label=\"显示状态\" prop=\"menuStatus\">\r\n              <el-radio-group v-model=\"menuForm.menuStatus\">\r\n                <el-radio :label=\"1\">停用</el-radio>\r\n                <el-radio :label=\"2\">启用</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"addMenu\">确 定</el-button>\r\n        <el-button type=\"primary\" @click=\"addMenuDialogVisible = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!--修改菜单-->\r\n    <el-dialog title=\"修改菜单\" :visible.sync=\"editMenuDialogVisible\" width=\"30%\" @close=\"editMenuDialogClosed\">\r\n      <el-form :model=\"menuInfo\" :rules=\"editMenuFormRules\" ref=\"editMenuFormRefForm\" label-width=\"80px\">\r\n        <el-row>\r\n          <el-col>\r\n            <el-form-item label=\"菜单类型\" prop=\"menuType\">\r\n              <el-radio-group v-model=\"menuInfo.menuType\">\r\n                <el-radio :label=\"1\">目录</el-radio>\r\n                <el-radio :label=\"2\">菜单</el-radio>\r\n                <el-radio :label=\"3\">按钮</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item size=\"mini\" label=\"上级菜单\" prop=\"parentId\" v-if=\"menuInfo.menuType != 1\">\r\n              <treeselect :options=\"treeList\" placeholder=\"请选择上级菜单\" v-model=\"menuInfo.parentId\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item label=\"菜单图标\" prop=\"icon\" v-if=\"menuInfo.menuType != 3\">\r\n              <el-select v-model=\"menuInfo.icon\">\r\n                <el-option v-for=\"item in iconList\" :key=\"item.value\" :label=\"item.label\"\r\n                           :value=\"item.value\">\r\n                  <i :class=\"item.value\" style=\"font-size: 25px;\"/>\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item label=\"菜单名称\" prop=\"menuName\">\r\n              <el-input v-model=\"menuInfo.menuName\" placeholder=\"请输入菜单名称\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item label=\"显示排序\" prop=\"sort\">\r\n              <el-input-number v-model=\"menuInfo.sort\" controls-position=\"right\" :min=\"0\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col v-if=\"menuInfo.menuType != 3\">\r\n            <el-form-item label=\"菜单url\" prop=\"url\">\r\n              <el-input v-model=\"menuInfo.url\" placeholder=\"请输入菜单url\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item v-if=\"menuInfo.menuType != 1\" label=\"权限标识\" prop=\"value\">\r\n              <el-input v-model=\"menuInfo.value\" placeholder=\"请权限标识\" maxlength=\"50\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item v-if=\"menuInfo.menuType != 3\" label=\"显示状态\" prop=\"menuStatus\">\r\n              <el-radio-group v-model=\"menuInfo.menuStatus\">\r\n                <el-radio :label=\"1\">停用</el-radio>\r\n                <el-radio :label=\"2\">启用</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"editMenu\">确 定</el-button>\r\n        <el-button type=\"primary\" @click=\"editMenuDialogVisible = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport Treeselect from \"@riophae/vue-treeselect\"\r\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\"\r\n\r\nexport default {\r\n  components: {Treeselect},\r\n  data() {\r\n    return {\r\n      queryParams: {},\r\n      menuStatusList: [{\r\n        value: '2',\r\n        label: '启用'\r\n      }, {\r\n        value: '1',\r\n        label: '停用'\r\n      }],\r\n      loading: true,\r\n      menuList: [],\r\n      isExpandAll: false,\r\n      refreshTable: true,\r\n      iconList: [\r\n        {value: 'el-icon-platform-eleme', label: 'el-icon-platform-eleme'},\r\n        {value: 'el-icon-eleme', label: 'el-icon-eleme'},\r\n        {value: 'el-icon-delete-solid', label: 'el-icon-delete-solid'},\r\n        {value: 'el-icon-delete', label: 'el-icon-delete'},\r\n        {value: 'el-icon-s-tools', label: 'el-icon-s-tools'},\r\n        {value: 'el-icon-setting', label: 'el-icon-setting'},\r\n        {value: 'el-icon-user-solid', label: 'el-icon-user-solid'},\r\n        {value: 'el-icon-user', label: 'el-icon-user'},\r\n        {value: 'el-icon-phone', label: 'el-icon-phone'},\r\n        {value: 'el-icon-phone-outline', label: 'el-icon-phone-outline'},\r\n        {value: 'el-icon-star-on', label: 'el-icon-star-on'},\r\n        {value: 'el-icon-star-off', label: 'el-icon-star-off'},\r\n        {value: 'el-icon-s-goods', label: 'el-icon-s-goods'},\r\n        {value: 'el-icon-goods', label: 'el-icon-goods'},\r\n        {value: 'el-icon-s-help', label: 'el-icon-s-help'},\r\n        {value: 'el-icon-picture', label: 'el-icon-picture'},\r\n        {value: 'el-icon-picture-outline', label: 'el-icon-picture-outline'},\r\n        {value: 'el-icon-picture-outline-round', label: 'el-icon-picture-outline-round'},\r\n        {value: 'el-icon-upload', label: 'el-icon-upload'},\r\n        {value: 'el-icon-upload2', label: 'el-icon-upload2'},\r\n        {value: 'el-icon-download', label: 'el-icon-download'},\r\n        {value: 'el-icon-s-cooperation', label: 'el-icon-s-cooperation'},\r\n        {value: 'el-icon-s-order', label: 'el-icon-s-order'},\r\n        {value: 'el-icon-s-promotion', label: 'el-icon-s-promotion'},\r\n        {value: 'el-icon-s-home', label: 'el-icon-s-home'},\r\n        {value: 'el-icon-s-shop', label: 'el-icon-s-shop'},\r\n        {value: 'el-icon-s-marketing', label: 'el-icon-s-marketing'},\r\n        {value: 'el-icon-s-flag', label: 'el-icon-s-flag'},\r\n        {value: 'el-icon-s-comment', label: 'el-icon-s-comment'},\r\n        {value: 'el-icon-s-finance', label: 'el-icon-s-finance'},\r\n        {value: 'el-icon-s-claim', label: 'el-icon-s-claim'},\r\n        {value: 'el-icon-s-custom', label: 'el-icon-s-custom'},\r\n        {value: 'el-icon-s-opportunity', label: 'el-icon-s-opportunity'},\r\n        {value: 'el-icon-s-data', label: 'el-icon-s-data'},\r\n        {value: 'el-icon-s-check', label: 'el-icon-s-check'},\r\n        {value: 'el-icon-s-grid', label: 'el-icon-s-grid'},\r\n        {value: 'el-icon-menu', label: 'el-icon-menu'},\r\n        {value: 'el-icon-share', label: 'el-icon-share'},\r\n        {value: 'el-icon-bottom', label: 'el-icon-bottom'},\r\n        {value: 'el-icon-top', label: 'el-icon-top'},\r\n        {value: 'el-icon-key', label: 'el-icon-key'},\r\n        {value: 'el-icon-unlock', label: 'el-icon-unlock'},\r\n        {value: 'el-icon-potato-strips', label: 'el-icon-potato-strips'},\r\n        {value: 'el-icon-shopping-cart-full', label: 'el-icon-shopping-cart-full'},\r\n        {value: 'el-icon-shopping-cart-1', label: 'el-icon-shopping-cart-1'},\r\n        {value: 'el-icon-shopping-cart-2', label: 'el-icon-shopping-cart-2'},\r\n        {value: 'el-icon-shopping-bag-1', label: 'el-icon-shopping-bag-1'},\r\n        {value: 'el-icon-sell', label: 'el-icon-sell'},\r\n        {value: 'el-icon-present', label: 'el-icon-present'},\r\n        {value: 'el-icon-box', label: 'el-icon-box'},\r\n        {value: 'el-icon-bank-card', label: 'el-icon-bank-card'},\r\n        {value: 'el-icon-wallet', label: 'el-icon-wallet'},\r\n        {value: 'el-icon-discount', label: 'el-icon-discount'},\r\n        {value: 'el-icon-price-tag', label: 'el-icon-price-tag'},\r\n        {value: 'el-icon-news', label: 'el-icon-news'},\r\n        {value: 'el-icon-guide', label: 'el-icon-guide'},\r\n        {value: 'el-icon-connection', label: 'el-icon-connection'},\r\n        {value: 'el-icon-chat-dot-round', label: 'el-icon-chat-dot-round'}\r\n      ],\r\n      addMenuDialogVisible: false,\r\n      menuForm: {\r\n        menuStatus: 2\r\n      },\r\n      addMenuFormRules: {\r\n        menuType: [{required: true, message: \"菜单类型不能为空\", trigger: \"blur\"}],\r\n        menuName: [{required: true, message: \"菜单名称不能为空\", trigger: \"blur\"}],\r\n        sort: [{required: true, message: \"菜单顺序不能为空\", trigger: \"blur\"}],\r\n        value: [{required: true, message: \"权限标识不能为空\", trigger: \"blur\"}]\r\n      },\r\n      treeList: [],\r\n      editMenuDialogVisible: false,\r\n      menuInfo: [],\r\n      editMenuFormRules: {\r\n        menuType: [{required: true, message: \"菜单类型不能为空\", trigger: \"blur\"}],\r\n        menuName: [{required: true, message: \"菜单名称不能为空\", trigger: \"blur\"}],\r\n        sort: [{required: true, message: \"菜单顺序不能为空\", trigger: \"blur\"}],\r\n        value: [{required: true, message: \"权限标识不能为空\", trigger: \"blur\"}]\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    // 列表\r\n    async getMenuList() {\r\n      this.loading = true;\r\n      const {data: res} = await this.$api.queryMenuList(this.queryParams)\r\n      // console.log(res)\r\n      if (res.code !== 200) {\r\n        this.$message.error(res.message);\r\n      } else {\r\n        this.menuList = this.$handleTree.handleTree(res.data, \"id\");\r\n        this.loading = false;\r\n      }\r\n    },\r\n    // 搜索\r\n    handleQuery() {\r\n      this.getMenuList();\r\n    },\r\n    // 重置\r\n    resetQuery() {\r\n      this.queryParams = {}\r\n      this.getMenuList();\r\n      this.$message.success(\"重置成功\")\r\n    },\r\n    // 展开/折叠\r\n    toggleExpandAll() {\r\n      this.refreshTable = false\r\n      this.isExpandAll = !this.isExpandAll\r\n      this.$nextTick(() => {\r\n        this.refreshTable = true\r\n      })\r\n    },\r\n    // 新增菜单关闭事件\r\n    addMenuDialogClosed() {\r\n      this.$refs.addMenuFormRefForm.resetFields()\r\n    },\r\n    // 新增下拉列表\r\n    async getMenuVoList() {\r\n      const {data: res} = await this.$api.querySysMenuVoList()\r\n      if (res.code !== 200) {\r\n        this.$message.error(res.message)\r\n      } else {\r\n        this.treeList = this.$handleTree.handleTree(res.data, \"id\")\r\n      }\r\n    },\r\n    // 新增操作\r\n    addMenu() {\r\n      this.$refs.addMenuFormRefForm.validate(async valid => {\r\n        if (!valid) return\r\n        const {data: res} = await this.$api.addMenu(this.menuForm);\r\n        if (res.code !== 200) {\r\n          this.$message.error(res.message)\r\n        } else {\r\n          this.$message.success(\"新增菜单成功\")\r\n          this.addMenuDialogVisible = false\r\n          await this.getMenuList()\r\n          await this.getMenuVoList()\r\n        }\r\n      })\r\n    },\r\n    // 监听修改菜单关闭事件\r\n    editMenuDialogClosed() {\r\n      this.$refs.editMenuFormRefForm.resetFields()\r\n    },\r\n    // 打开菜单\r\n    async showEditMenuDialog(id) {\r\n      const {data: res} = await this.$api.menuInfo(id)\r\n      if (res.code !== 200) {\r\n        this.$message.error(res.message)\r\n      } else {\r\n        this.menuInfo = res.data\r\n        this.editMenuDialogVisible = true\r\n      }\r\n    },\r\n    // 修改菜单\r\n    editMenu() {\r\n      this.$refs.editMenuFormRefForm.validate(async valid => {\r\n        if (!valid) return\r\n        const {data: res} = await this.$api.menuUpdate(this.menuInfo)\r\n        if (res.code !== 200) {\r\n          this.$message.error(res.message)\r\n        } else {\r\n          this.editMenuDialogVisible = false\r\n          await this.getMenuList()\r\n          this.$message.success(\"修改菜单成功\")\r\n        }\r\n      })\r\n    },\r\n    // 删除菜单\r\n    async handleMenuDelete(row) {\r\n      const confirmResult = await this.$confirm('是否确认删除菜单为\"' + row.menuName + '\"的数据项？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消删除')\r\n      }\r\n      const {data: res} = await this.$api.menuDelete(row.id)\r\n      if (res.code !== 200) {\r\n        this.$message.error(res.message)\r\n      } else {\r\n        this.$message.success('删除成功')\r\n        await this.getMenuList()\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.getMenuList()\r\n    this.getMenuVoList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}