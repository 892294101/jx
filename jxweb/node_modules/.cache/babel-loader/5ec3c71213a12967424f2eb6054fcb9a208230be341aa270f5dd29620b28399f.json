{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\r\n * 通用的方法\r\n *\r\n * @author xiaoRui\r\n */\nexport default {\n  // 展开树形数据方法\n  handleTree(data, id, parentId, children) {\n    let config = {\n      id: id || 'id',\n      parentId: parentId || 'parentId',\n      childrenList: children || 'children'\n    };\n    var childrenListMap = {};\n    var nodeIds = {};\n    var tree = [];\n    for (let list of data) {\n      let parentId = list[config.parentId];\n      if (childrenListMap[parentId] == null) {\n        childrenListMap[parentId] = [];\n      }\n      nodeIds[list[config.id]] = list;\n      childrenListMap[parentId].push(list);\n    }\n    for (let d of data) {\n      let parentId = d[config.parentId];\n      if (nodeIds[parentId] == null) {\n        tree.push(d);\n      }\n    }\n    for (let t of tree) {\n      fillToChildrenList(t);\n    }\n    function fillToChildrenList(o) {\n      if (childrenListMap[o[config.id]] !== null) {\n        o[config.childrenList] = childrenListMap[o[config.id]];\n      }\n      if (o[config.childrenList]) {\n        for (let c of o[config.childrenList]) {\n          fillToChildrenList(c);\n        }\n      }\n    }\n    return tree;\n  },\n  toTreeList(data, idName, parentIdName) {\n    const id = idName || \"id\";\n    const parentId = parentIdName || \"parentId\";\n    // 删除 所有 children,以防止多次调用\n    data.forEach(function (item) {\n      delete item.children;\n    });\n    // 将数据存储为 以 id 为 KEY 的 map 索引数据列\n    const map = {};\n    data.forEach(function (item) {\n      map[item[id]] = item;\n    });\n    const menu = [];\n    data.forEach(function (item) {\n      // 在map中找到当前项的父级菜单\n      const parent = map[item[parentId]];\n      if (parent) {\n        // 如果父级菜单存在，则将当前项存入父级的children\n        // 如果父级的children不存在，初始化为空数组[]后再存入\n        (parent.children || (parent.children = [])).push(item);\n      } else {\n        // 如果父级菜单不存在，则做为顶级菜单存入\n        menu.push(item);\n      }\n    });\n    return menu;\n  }\n};","map":{"version":3,"names":["handleTree","data","id","parentId","children","config","childrenList","childrenListMap","nodeIds","tree","list","push","d","t","fillToChildrenList","o","c","toTreeList","idName","parentIdName","forEach","item","map","menu","parent"],"sources":["/Users/kqwang/development/gowork/src/github.com/892294101/jx/jxweb/src/utils/common.js"],"sourcesContent":["/**\r\n * 通用的方法\r\n *\r\n * @author xiaoRui\r\n */\r\nexport default {\r\n    // 展开树形数据方法\r\n    handleTree(data, id, parentId, children) {\r\n        let config = {\r\n            id: id || 'id',\r\n            parentId: parentId || 'parentId',\r\n            childrenList: children || 'children'\r\n        };\r\n        var childrenListMap = {};\r\n        var nodeIds = {};\r\n        var tree = [];\r\n        for (let list of data) {\r\n            let parentId = list[config.parentId];\r\n            if (childrenListMap[parentId] == null) {\r\n                childrenListMap[parentId] = [];\r\n            }\r\n            nodeIds[list[config.id]] = list;\r\n            childrenListMap[parentId].push(list);\r\n        }\r\n        for (let d of data) {\r\n            let parentId = d[config.parentId];\r\n            if (nodeIds[parentId] == null) {\r\n                tree.push(d);\r\n            }\r\n        }\r\n        for (let t of tree) {\r\n            fillToChildrenList(t);\r\n        }\r\n\r\n        function fillToChildrenList(o) {\r\n            if (childrenListMap[o[config.id]] !== null) {\r\n                o[config.childrenList] = childrenListMap[o[config.id]];\r\n            }\r\n            if (o[config.childrenList]) {\r\n                for (let c of o[config.childrenList]) {\r\n                    fillToChildrenList(c);\r\n                }\r\n            }\r\n        }\r\n\r\n        return tree;\r\n    },\r\n    toTreeList(data, idName, parentIdName) {\r\n        const id = idName || \"id\";\r\n        const parentId = parentIdName || \"parentId\";\r\n        // 删除 所有 children,以防止多次调用\r\n        data.forEach(function (item) {\r\n            delete item.children;\r\n        });\r\n        // 将数据存储为 以 id 为 KEY 的 map 索引数据列\r\n        const map = {};\r\n        data.forEach(function (item) {\r\n            map[item[id]] = item;\r\n        });\r\n        const menu = [];\r\n        data.forEach(function (item) {\r\n            // 在map中找到当前项的父级菜单\r\n            const parent = map[item[parentId]];\r\n            if (parent) {\r\n                // 如果父级菜单存在，则将当前项存入父级的children\r\n                // 如果父级的children不存在，初始化为空数组[]后再存入\r\n                (parent.children || (parent.children = [])).push(item);\r\n            } else {\r\n                // 如果父级菜单不存在，则做为顶级菜单存入\r\n                menu.push(item);\r\n            }\r\n        });\r\n        return menu;\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}